vim: fdl=0 ft=build fdm=expr:

# build
## Arch install - from the ISO
### ARCH_202008 - SQUASHFS errors
K16GB500 loaded with archlinux-2020.08.01-x86_64.iso  in lowest socket, 2nd from top of box
Del at startup for UEFI DualBIOS > BIOS Features > Boot Option #1 > UEFI: KingstonDT R500 PMAP
#### IOMMU snags at boot
several "...AMD-Vi: Event logged [IO_PAGE_FAULT..."  can be reviewed with  journalctl -b
#### USB Port
lsusb  reports Bus 003 Device 004: ... Kingston Technology Data Traveller G3
#### attempt to connect with TL-WN821N
##### iwctl
device list   shows   wlan0
###### try Moto G (4) 1367
station wlan0 get-networks   listed   Moto G (4) 1367   among others, and live updates
station wlan0 connect 'Moto G (4) 1367' > Passphrase  got me "Operation failed"
###### try Xperia XA2_b31f
station wlan0 scan  for
  station wlan0 get-networks   listed  Xperia XA2_b31f
station wlan0 connect "Xperia XA2_b31f" > Passphrase  got me "Operation failed"
##### check for faulty rtl8xxxu
lsmod | grep rtl8   shows it to be there
#### prepare the bootable disk
lsblk  shows SD480GSSDPlus is /dev/sdd
  gdisk /dev/sdd > o (create a new empty GUID partition table GPT & new protective MBR) y
    w   for  gdisk /dev/sdd  (MBR: protection  GPT: present)
##### create partitions
n > Partition number (defaults to 1) > First sector (defaults to 2048) > Last sector > +550m >
  ef00 (EFI system partition)
n > Partition number (defaults to 2) > First sector (defaults to 1128448) > +60g > Hex code >
  8304 Linux x86-64 root (/)
n > Partition number (defaults to 3) > First sector (defaults to the sector after partition 2) >
  +4g > 8200 (Linux swap)
n > Partition number (defaults to 4) > First sector (defaults to the sector after partition 3) >
  +60g > Hex code > 8302 (Linux home)
n > Partition number (defaults to 5) > First sector (defaults to the sector after partition 5) >
  Enter > Enter > 8300 (Linux filesystem)
w
#### repositioned hd's
#### no write-back cache on K16GB500
so occasionally getting "...No Caching mode page found..."
#### failed to mount K8GBDT100 for pacstrap
mkdir /bs   mount /dev/sdg1 /bs  got me SQUASHFS error "unknown filesystem type vfat"
reboot  got me a load of SQUASHFS errors
### ARCH_202008 to chroot
K8GBDTIG3 loaded with archlinux-2020.08.01-x86_64.iso  in lowest socket, 2nd from top of box
Del at startup for UEFI DualBIOS > BIOS Features > Boot Option #1 >
  UEFI: KingstonDataTraveller G3 PMAP
#### K8GBDT100
mkdir /bs   mount /dev/sdf1 /bs   cd /bs/ArchBuilds/build-scripts
bash 00-AndroidTethers.sh  worked, but with some "ps_bpf_recvmsg: Invalid argument"
bash 01-as_root-efi-to_chroot.sh
  curl... signature from Felix... Invalid... PGP signature
#### finish manually
pacstrap /mnt base linux linux-firmware
  perl: warning: Setting locale failed
...
### to bootloader
#### K8GBDT100
mount /dev/sdg1 /mnt   cd /mnt/ArchBuilds/build-scripts
bash 02-when_chroot-to_bootloader.sh
bash 02-when_chroot-reflector.sh
cd /  for  umount /dev/sdg1  "target is busy"  so  umount -l /dev/sdg1
mount /dev/sdh1 /mnt   cd /mnt/ArchBuilds/build-scripts
## reboot to root
Del at startup for UEFI DualBIOS > BIOS Features > Boot Option #1 > GRUB (PO: SanDisk SSD PLUS 480GB)
root pw
dmesg | grep "EFI v"  reported "EFI v2.31"
### K8GBDT100
mount /dev/sde1 /mnt   cd /mnt/ArchBuilds/build-scripts
bash 03-git_and_root_bashrc.sh
relogged into root
cd /ArchBuilds  for  git fetch  then  git merge
cd /build-scripts  for  bash 06-as_root-to_....sh
### repartition WD30EZRZ
lsblk  indicated  parted /dev/sde
  print
  mklabel gpt > y
  mkpart primary 0% 100%
  print
  quit
lsblk  indicated  mkfs.ext4 -L WD30EZRZ /dev/sde1
### label the end of SD480GSSDPlus
lsblk  indicated  e2label /dev/sda5 SD480GSSDPlus
lsblk -f
### repartition ST3320418AS
  print
  mklabel gpt > y
  mkpart primary 0% 100%
lsblk  indicated  mkfs.ext4 -L ST3320418AS /dev/sdc1
### remove RAID signature from 9QF57J6Q
dmraid -r   reports  "/dev/sdd: isw..."   removed with  dmraid -r -E /dev/sdd
### 09-as_root-fstab.sh
### 10-as_root-when_jo-to_X.sh
## configuring jo
### manual mount point
sudo mkdir mm
### SSH keys
#### mount K8GBDT100 writeable
lsblk -f  indicated  sudo mount /dev/sde1 /mm
sudo mount -t vfat -o uid=1000,gid=1000 /dev/sde1 /mm  # writeable as jo
#### update ArchBuilds
mv /ArchBuilds ~
sudo chown -R jo:jo ArchBuilds
#### SSH keys
bash 12-git.sh
### bashrc
bash 13-symlinks_for_Bash.sh
### before WM
#### mount K8GBDT100 writeable
lsblk -f  indicated  sudo mount /dev/sde1 /mm
sudo mount -t vfat -o uid=1000,gid=1000 /dev/sde1 /mm  # writeable as jo
#### 14-beforeWM.sh
#### 15-as_root-rsnapshot_automated.sh
#### checked /mnt/WD30EZRZ/rsnapshot/ contents
#### some symlinks
##### mount K8GBDT100 writeable
lsblk -f  indicated  sudo mount /dev/sde1 /mm
sudo mount -t vfat -o uid=1000,gid=1000 /dev/sde1 /mm  # writeable as jo
##### 17-symlinks-jo.sh
## /etc/locale.gen.pacnew
cd /etc/  for  su + root pw  for
nvim -O locale.gen locale.gen.pacnew   & diff'd over changes
rm /locale.gen.pacnew
## GnuPG keys
gpg --list-keys
  gpg: directory '/home/jo/.gnupg' created
  gpg: keybox '/home/jo/.gnupg/pubring.kbx' created
  gpg: /home/jo/.gnupg/trustdb.gpg: trustdb created
## Openbox
bash 18-GnuPG+pandoc.sh
bash 18-as_root-toOpenbox.sh
bash 19-prepare_forSoftwares.sh
bash 20-gitconfig.sh
bash 21-configureOpenbox.sh
bash 22-Openbox-symlinks.sh
bash 22-whenWM.sh
## chromium won't render
chromium --disable-gpu  always works
somehow  wayland  is there
### xf86-video-nouveau first
sudo pacman -Rs chromium   removed a load
sudo pacman -S mesa xf86-video-nouveau   then   reboot
sudo pacman -S chromium   added a load
## CopyQ
CopyQ > Ctrl+P > [ General > Confirm application exit off   History > Maximum > 700
  Items > Text > [ HTML off-ticked  Maximum number of lines > 2 ]
  Shortcuts > Show/hide main window > Win+P (= Meta+P)
  Appearance > Theme > forest
## Chromium
logged in, and LastPass
## failed again to connect to Moto G (4) 1367 with TL-WN821N
## ~/.vimswap
created
## gpg access to keyservers gone
gpg --recv-keys 6C37DC12121A5006BC1DB804DF6FD971306037D9
  gpg: keyserver receive failed: General error
not fixed by  killall dirmngr
gpg --keyserver keys.gnupg.net --recv-keys DF6FD971306037D9  worked
## handlr-bin
:: xdg-utils-handlr and xdg-utils are in conflict. Remove xdg-utils? [y/N] y
handlr open .   got me  no handlers found for 'inode/directory'
## attempt to connect with TL-WN821N
iwctl device list
iwctl station wlan0 get-networks
iwctl station wlan0 connect 'Jo-XA2' > Passphrase  got me "Operation failed"
### 8192eu-dkms
24-8192eu-dkms.sh
### blacklisted rtl8xxxu
could then connect to XA2, but  "ping: google.com: Temporary failure in name resolution"
## NM connect with USB WiFi to Jo-XA2
### NETGEAR WG111v2
nmcli device
nmcli device wifi list
nmcli device wifi connect Jo-XA2 password a33a0183b2
  got  ping -c 3 -n google.com  working, & connection to https://...
### switched back to TL-WN821N
nmcli connection delete Jo-XA2
nmcli device wifi connect Jo-XA2 password a33a0183b2
  got  ping -c 3 -n google.com  working, & connection to https://...
  and reconnected automatically after the hotspot had been off for a while
  after a reboot, needed to pull it up with the UUID of Jo-XA2
## Dropbox
Preferences > Sync > [ Selective > off-ticked all   Move > /mnt/SD480GSSDPlus/ ]
Doesn't seem to run or keep running...
## NM to Jo-X10II
nmcli device wifi connect Jo-X10II password a33a0183e10
  got my  p  working, & connection to https://...
## system seized
clock stuck at 3h, no CBH, so hard reboot
systemctl status firewalld
  WARNING: ipset not usable, disabling ipset usage in firewall
  WARNING: ebtables-restore and ebtables are missing, disabling bridge firewall.
## clamscan
sudo clamscan -r --exclude-dir='/mnt|/sys' / 2>&1 | tee ~/Arch/clamscan.txt
gvim -c "silent! / FOUND$" -geom 200 ~/Arch/clamscan.txt
sudo freshclam
  ...
  WARNING: Clamd was NOT notified: Can't connect to clamd through /run/clamav/clamd.ctl: No such file or directory
fixed with empty sock file
## system seized again
my best guess it's related to  8192eu-dkms  so removed it
removing  dkms  broke a few things, so I re-installed it
# physical configuration
Mirai DML-519W100 - wide 1440x900 = 16:10
TL-WN821N
## cbh
Logitech MX 610 Laser Cordless Mouse
Perixx PERIBOARD-407W keyboard
## motherboard
Gigabyte GA-970A-DS3P rev.2.1 ATX Socket AM3+ DDR3 S-ATA 600 PCI Express 2.0 x16 USB 3.0
  AMD FX 8350 Black Edition 8 Core AM3+ 4 GHz 8 MB L3 Cache 125 W CPU
  HyperX FURY 2 x 4 GB DDR3 1866 MHz CL10 DIMM Memory
### disks
SD480GSSDPlus
ST3320418AS
ST3320620AS 9QF57J6Q on middle shelf
WD30EZRZ
### startup
Del  gets into BIOS
F12  gets a choice of boot media
#### BIOS Features
Peripherals > EHCI Hand-off Disabled [ IOMMU Controller  XHCI Hand-off ] > Enabled
### graphics
Acer GF-7300SE-N-A3 nVidia GeForce 7300 graphics card  on  PCIEX16
  KNOPPIX v8.6.1 > chromium works fine
### USB headers
Digitus 4x USB 2 outlet fitted to F_USB2 & F_USB2
