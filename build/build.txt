vim: fdl=1 ft=build fdm=expr:

robocopy /mir D:\Dropbox\JH\IT_stack\onGitHub\AcerVeritonT661 G:\AcerVeritonT661

# Physical Configuration
LabelFlash DVD writer in top tray with flip-down front cover, SATA2
## HDs
SDSSDA240G on SATA1, sitting loosely in a tray
gpt partitions built up from a previous gdisk
### added hd's & not yet connected to SATA ports
9QG2FFEE, 2nd tray from bottom
HD103SJ, lowest tray
WD1001FALS in a plastic holder, third wide tray down
## human interface
Logitech ® Ultra-Flat Keyboard  plugged in purple
Logitech Cordless Desktop EX 110 Mouse plugged in Green PS/2 port
GNR TS501
## TL-WR702N
plugged into LAN socket as Client to Samsung Core Prime
# Arch install
booted to  archlinux-2019.03.01-x86_64.iso  CD
loadkeys uk
## storage spaces
lsblk -f  indicated   gdisk /dev/sda   x (extra functionality) > z (Zap)  y
  gdisk /dev/sda   t > 2 > 8304   w > y
swapon /dev/sda4   (then  swapon -s  shows /dev/sda4 has default Priority -2)
mkfs.ext4 /dev/sda2  y   for   mount /dev/sda2 /mnt
mkdir /mnt/home   then   mkfs.ext4 /dev/sda3  y   for   mount /dev/sda3 /mnt/home
## internet
(ip link  reports  LAN  socket as  enp0s25) ping -c 3 8.8.8.8  got a response
## install the base packages
pacstrap /mnt base base-devel  installed 155 Packages
## after base Packages
K16GB500  plugged in carrying  JH\IT_stack\onGitHub\AcerVeritonT661
mkdir /home/mnt   for   mount /dev/sdf1 /home/mnt
cd /home/mnt/AcerVeritonT661/build   for   bash after-basePackages.sh
## change root
arch-chroot /mnt
sudo -ll   works
### after chroot
K16GB500  plugged in carrying  JH\IT_stack\onGitHub\AcerVeritonT661
mount /dev/sdf1 /mnt
cd /mnt/AcerVeritonT661/build   for   bash after-chroot.sh
### locale
vi /etc/locale.gen
  and uncommented   en_GB.UTF-8 UTF-8  &  en_US>UTF-8 UTF_8  &  fr_FR>UTF-8 UTF_8
  cat /etc/locale.gen | grep -v ^#   then  locale-gen
### update K16GB500
cd /   then  umount /dev/sdf1   for updating, then   mount /dev/sdg1 /mnt
pacman -S rsync
rsync -irtv --delete /mnt/AcerVeritonT661 /home/AcerVeritonT661/
### after locale
cd /home/AcerVeritonT661/build   for    bash after_locale.sh
### root password
passwd
### shutdown to eject CD
exit   then   shutdown -h  now
## booted to SSD
restarted, immediately ejecting the CD
slow to get to Grub, then to console...
logged in as "root"
### enp0s25
dhcpcd enp0s25
### K16GB500
mount /dev/sdg1 /mnt
rsync -irtv --delete /mnt/AcerVeritonT661 /home/AcerVeritonT661/
### when booted to SSD
cd /home/AcerVeritonT661/build   for    bash -x whenSSD.sh
### User jo
passwd jo
visudo   and  added  jo ALL=(ALL) ALL   above the   root declaration
### stat root folders
stat -c '%n %a %G %U' /*   etc
### update /home/AcerVeritonT661
umount /dev/sdf1   for updating, then   mount /dev/sdf1 /mnt
rsync -irtv --delete /mnt/AcerVeritonT661 /home/AcerVeritonT661/
### override-conf
bash -x override-conf.sh   reboot
### AcerVeritonT661
sudo mkdir /mnt/K16GB500  pw for jo
stat -c '%n %a %G %U' /mnt/*  reveals it to be  755 root root
lsblk -f  indicated  sudo mount /dev/sdb1 /mnt/K16GB500
cp -r /mnt/K16GB500/AcerVeritonT661/ .
stat -c '%n %a %G %U' *  reveals it to be  755 jo jo
### noclear-conf
sudo bash -x noclear-conf.sh   sudo reboot
### AcerVeritonT661
lsblk -f  indicated  sudo mount /dev/sdf1 /mnt/K16GB500
rsync -irtv --delete /mnt/K16GB500/AcerVeritonT661 /home/jo/
### Numlock
sudo bash -x Numlock.sh   sudo reboot
### enp0s25 always live
systemctl enable dhcpcd@enp0s25   got me  "Created symlink /etc/systemd/system/multi-user.target.wants/dhcpcd@enp0s25.service → /usr/lib/systemd/system/dhcpcd@.service"   sudo reboot
### Secure Shell
sudo pacman -S openssh  = 3 packages
### firewalld
sudo pacman -S firewalld   = 17 packages including nftables & python
(sudo systemctl enable firewalld 2>&1) | tee firewalld.txt   which contained:
  Created symlink /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service → /usr/lib/systemd/system/firewalld.service.
  Created symlink /etc/systemd/system/multi-user.target.wants/firewalld.service → /usr/lib/systemd/system/firewalld.service.
(sudo systemctl start firewalld) | tee firewalld.txt   which contained:
  ...
  ... WARNING: ipset not usable, disabling ipset usage in firewall.
  ... WARNING: ebtables-restore and ebtables are missing, disabling bridge firewall.
sudo reboot   for   sudo firewall-cmd --state
#### active zone
firewall-cmd --get-default-zone   reports  "public"
sudo firewall-cmd --list-all
sudo firewall-cmd --set-default-zone=home   sudo reboot  jammed, so hard restart...
##### failed to block ping 8.8.8.8
firewall-cmd --zone=drop --add-rich-rule='rule family="ipv4" source address="8.8.8.8" reject'
##### home
sudo firewall-cmd --set-default-zone=home
sudo firewall-cmd --permanent --zone=home --change-interface=enp0s25
sudo reboot   for  sudo firewall-cmd --list-all
### connected HDs
WD1001FALS to SATA3
9QG2FFEE to SATA4
HD103SJ to SATA5
### enp0s25 snag
systemctl status dhcpcd@enp0s25   reporting  "failed"
### bind-tools
sudo pacman -S bind-tools  for 4 packages
### Wget
sudo pacman -S wget   Packages (1) wget-1.20.1-3
### ClamAV
sudo pacman -S clamav   for 2 Packages
sudo freshclam
  ...
  WARNING: Clamd was NOT notified: Can't connect to clamd through /var/lib/clamav/clamd.sock: No such file or directory

    sudo touch /var/lib/clamav/clamd.sock
    sudo chown clamav:clamav /var/lib/clamav/clamd.sock
#### ClamAV check
in  IT_Copied/Cross-platform/:
  curl http://www.eicar.org/download/eicar.com.txt | clamscan -
  ...
  stdin: Eicar-Test-Signature FOUND
  ...
  Known viruses: 6335533
  Engine version: 0.99.2
#### clamscan
in ~/Arch:
  sudo clamscan -r --exclude-dir=/mnt --exclude-dir=/run/media/jo / 2>&1 | tee clamscan.txt
# waiting
